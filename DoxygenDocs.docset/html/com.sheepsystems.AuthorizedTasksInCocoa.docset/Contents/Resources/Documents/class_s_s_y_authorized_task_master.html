<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AuthorizedTasksInCocoa: SSYAuthorizedTaskMaster Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SSYAuthorizedTaskMaster Class Reference</h1><!-- doxytag: class="SSYAuthorizedTaskMaster" -->A class for accessing a privileged Helper Tool to perform authorized tasks.  
<a href="#_details">More...</a>
<p>
<code>#import &lt;<a class="el" href="_s_s_y_authorized_taskmaster_8h-source.html">SSYAuthorizedTaskmaster.h</a>&gt;</code>
<p>

<p>
<a href="class_s_s_y_authorized_task_master-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_s_s_y_authorized_task_master.html#1dc3930fb2b15f7945f8d129c055d9fa">executeRequest:response_p:error_p:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Executes request in the Helper Tool.  <a href="#1dc3930fb2b15f7945f8d129c055d9fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_s_s_y_authorized_task_master.html#b5e2843812bcad27dd3d89818cc11cef">initWithCommandSpecs:helperToolName:installerToolName:stringsFilename:bundleIdentifier:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Designated initializer.  <a href="#b5e2843812bcad27dd3d89818cc11cef"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(void)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_s_s_y_authorized_task_master.html#9d441761cf1e564a0c96c7ddf6f58837">recreateAuthorization</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys the instance's authorization (_authRef) using AuthorizationFree() and then creates a new one using AuthorizationCreate().  <a href="#9d441761cf1e564a0c96c7ddf6f58837"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(OSStatus)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_s_s_y_authorized_task_master.html#3d824456e1398ac9d64026f4b35b183b">removeRight:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a named right from the system's Security Server's credentials cache, using AuthorizationRightRemove().  <a href="#3d824456e1398ac9d64026f4b35b183b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="class_s_s_y_authorized_task_master.html#91bec7ba1991e2f738babb707303a7e0">removeRightsError_p:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the rights specified for all commands in the receiver's current commandSpec from the the system's Security Server's credentials cache, using AuthorizationRightRemove().  <a href="#91bec7ba1991e2f738babb707303a7e0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(<a class="el" href="class_s_s_y_authorized_task_master.html">SSYAuthorizedTaskMaster</a> *)&nbsp;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="class_s_s_y_authorized_task_master.html#b9b315e13355015bbf242cf66a433160">sharedTaskmaster</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">To get and/or create a SSYAuthorizedTaskmaster singleton for an application.  <a href="#b9b315e13355015bbf242cf66a433160"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8d8405b3d4524350c3496a5c828f8544"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::authorizationRef" ref="8d8405b3d4524350c3496a5c828f8544" args="" -->
AuthorizationRef&nbsp;</td><td class="memItemRight" valign="bottom"><b>authorizationRef</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8f6092c71889dc014f044c26322ed509"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::commandSpecs" ref="8f6092c71889dc014f044c26322ed509" args="" -->
const <a class="el" href="struct_b_a_s_command_spec.html">BASCommandSpec</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandSpecs</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cbfe6a3b5e23bff4125ea88cdb5d258d"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::helperToolName" ref="cbfe6a3b5e23bff4125ea88cdb5d258d" args="" -->
NSString *&nbsp;</td><td class="memItemRight" valign="bottom"><b>helperToolName</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="957248eb671928690fba798dc45ade00"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::installerToolName" ref="957248eb671928690fba798dc45ade00" args="" -->
NSString *&nbsp;</td><td class="memItemRight" valign="bottom"><b>installerToolName</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A class for accessing a privileged Helper Tool to perform authorized tasks. 
<p>
Designed to instantiated as a singleton, but you could have more than one if you really wanted to. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1dc3930fb2b15f7945f8d129c055d9fa"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::executeRequest:response_p:error_p:" ref="1dc3930fb2b15f7945f8d129c055d9fa" args="(NSDictionary *request,[response_p] NSDictionary **response_p,[error_p] NSError **error_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) executeRequest:           </td>
          <td></td>
          <td class="paramtype">(NSDictionary*)&nbsp;</td>
          <td class="paramname"> <em>request</em></td>
        </tr>
        <tr>
          <td class="paramkey">response_p:</td>
          <td></td>
          <td class="paramtype">(NSDictionary**)&nbsp;</td>
          <td class="paramname"> <em>response_p</em></td>
        </tr>
        <tr>
          <td class="paramkey">error_p:</td>
          <td></td>
          <td class="paramtype">(NSError**)&nbsp;</td>
          <td class="paramname"> <em>error_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Executes request in the Helper Tool. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>request to be executed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>response_p</em>&nbsp;</td><td>Pointer to which the response NSDictionary* will be assigned.&nbsp; response_p will be autoreleased, but you must close any file descriptors that you get in it. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>error_p</em>&nbsp;</td><td>Pointer to an NSError* to which any error will be assigned </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>YES if successful, NO otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="b5e2843812bcad27dd3d89818cc11cef"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::initWithCommandSpecs:helperToolName:installerToolName:stringsFilename:bundleIdentifier:" ref="b5e2843812bcad27dd3d89818cc11cef" args="(const BASCommandSpec *commandSpecs,[helperToolName] NSString *helperToolName,[installerToolName] NSString *installerToolName,[stringsFilename] NSString *stringsFilename,[bundleIdentifier] NSString *bundleIdentifier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithCommandSpecs:           </td>
          <td></td>
          <td class="paramtype">(const <a class="el" href="struct_b_a_s_command_spec.html">BASCommandSpec</a> *)&nbsp;</td>
          <td class="paramname"> <em>commandSpecs</em></td>
        </tr>
        <tr>
          <td class="paramkey">helperToolName:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>helperToolName</em></td>
        </tr>
        <tr>
          <td class="paramkey">installerToolName:</td>
          <td></td>
          <td class="paramtype">(NSString *)&nbsp;</td>
          <td class="paramname"> <em>installerToolName</em></td>
        </tr>
        <tr>
          <td class="paramkey">stringsFilename:</td>
          <td></td>
          <td class="paramtype">(NSString*)&nbsp;</td>
          <td class="paramname"> <em>stringsFilename</em></td>
        </tr>
        <tr>
          <td class="paramkey">bundleIdentifier:</td>
          <td></td>
          <td class="paramtype">(NSString*)&nbsp;</td>
          <td class="paramname"> <em>bundleIdentifier</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Designated initializer. 
<p>
An instance of SSYAuthorizedTaskmaster needs to know what its commands are, what additional prompt if any to present in the authentication dialog, and the name of the tool that executes the tasks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>commandSpecs</em>&nbsp;</td><td>a C array of <a class="el" href="struct_b_a_s_command_spec.html">BASCommandSpec</a> structs, specifying the commands that the receiver will implement.&nbsp; Because we can't retain a C array, we require it to be const we insure that it won't go away.&nbsp; If this is NULL, commandSpecs will be set to a an array consisting of a single element of NULL components, which won't be very useful.&nbsp; To be useful, this parameter must not be NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>helperToolName</em>&nbsp;</td><td>The name of the authorized helper tool which must be found in Contents/MacOS.&nbsp; If you pass nil, defaults to @"AuthorizedTaskHelperTool". </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>installerToolName</em>&nbsp;</td><td>The name of the tool used to install the helper tool which must be found in Contents/MacOS.&nbsp; If you pass nil, defaults to @"AuthorizedTaskHelperToolInstaller". </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>stringsFilename</em>&nbsp;</td><td>The name of a .strings file containing the prompt(s) specified in the rightDescriptionKey field(s) of the <a class="el" href="struct_b_a_s_command_spec.html">BASCommandSpec</a> structs in commandSpecs.&nbsp; If nil, defaults to the usual "Localizable".&nbsp; This argument is only used for prepending a string to the " MyApp.app requires that you type your/administrator password" prompt in the authentication dialogs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bundleIdentifier</em>&nbsp;</td><td>The bundle identifier of the bundle which contains the stringsFilename.strings file in its Resources.&nbsp; If nil, defaults to [[NSBundle mainBundle] bundleIdentifier].&nbsp; This argument is only used for prepending a string to the " MyApp.app requires that you type your/administrator password" prompt in the authentication dialogs.&nbsp; It may be nil. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="9d441761cf1e564a0c96c7ddf6f58837"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::recreateAuthorization" ref="9d441761cf1e564a0c96c7ddf6f58837" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) recreateAuthorization           </td>
          <td></td>
          <td class="paramname">          </td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroys the instance's authorization (_authRef) using AuthorizationFree() and then creates a new one using AuthorizationCreate(). 
<p>
A utility method, useful in debugging <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rightName</em>&nbsp;</td><td>The name of the right to be removed </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="3d824456e1398ac9d64026f4b35b183b"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::removeRight:" ref="3d824456e1398ac9d64026f4b35b183b" args="(const char *rightName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (OSStatus) removeRight:           </td>
          <td></td>
          <td class="paramtype">(const char*)&nbsp;</td>
          <td class="paramname"> <em>rightName</em>          </td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes a named right from the system's Security Server's credentials cache, using AuthorizationRightRemove(). 
<p>
A utility method, useful in debugging <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rightName</em>&nbsp;</td><td>The name of the right to be removed </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The valued returned by AuthorizationRightRemove(), or paramErr if rightName is NULL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="91bec7ba1991e2f738babb707303a7e0"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::removeRightsError_p:" ref="91bec7ba1991e2f738babb707303a7e0" args="(NSError **error_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) removeRightsError_p:           </td>
          <td></td>
          <td class="paramtype">(NSError**)&nbsp;</td>
          <td class="paramname"> <em>error_p</em>          </td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Removes the rights specified for all commands in the receiver's current commandSpec from the the system's Security Server's credentials cache, using AuthorizationRightRemove(). 
<p>
A utility method, useful in debugging.&nbsp; <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>error_p</em>&nbsp;</td><td>On return, if an error occurred, points to an error giving the cause.&nbsp; If you are not interested in the error, you may pass NULL. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>YES upon success, otherwise NO. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b9b315e13355015bbf242cf66a433160"></a><!-- doxytag: member="SSYAuthorizedTaskMaster::sharedTaskmaster" ref="b9b315e13355015bbf242cf66a433160" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="class_s_s_y_authorized_task_master.html">SSYAuthorizedTaskMaster</a> *) sharedTaskmaster           </td>
          <td></td>
          <td class="paramname">          </td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
To get and/or create a SSYAuthorizedTaskmaster singleton for an application. 
<p>
Recommended unless you have &gt; 1 authorized helper tool in an application.&nbsp; The sharedTaskmaster singleton is initialized with value(s) returned by [NSApp delegate] if it responds to any of the optional methods in the <a class="el" href="protocol_s_s_y_authorized_helpee-p.html">SSYAuthorizedHelpee</a> protocol.&nbsp; Otherwise, the default values given in the designated initializer documentation are used. <dl class="return" compact><dt><b>Returns:</b></dt><dd>The SSYAuthorizedTaskmaster singleton. </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>Documents/Programming/Projects/AuthorizedTasksInCocoa/SSYAuthorizedTaskmaster+CopyFiles.m<li>Documents/Programming/Projects/AuthorizedTasksInCocoa/<a class="el" href="_s_s_y_authorized_taskmaster_8h-source.html">SSYAuthorizedTaskmaster.h</a><li>Documents/Programming/Projects/AuthorizedTasksInCocoa/SSYAuthorizedTaskmaster.m</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Aug 23 13:34:31 2009 for AuthorizedTasksInCocoa by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
